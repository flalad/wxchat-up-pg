# ğŸš€ å¾®ä¿¡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹ Web åº”ç”¨

<div align="center">

![Version](https://img.shields.io/badge/version-2.2.0-blue.svg)
![License](https://img.shields.io/badge/license-CC%20BY--NC--SA%204.0-green.svg)
![Platform](https://img.shields.io/badge/platform-Cloudflare%20Workers%20%7C%20Pages-orange.svg)
![Status](https://img.shields.io/badge/status-Production%20Ready-brightgreen.svg)

**åŸºäº Cloudflare Workers/Pages çš„ç°ä»£åŒ–å¾®ä¿¡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹**

æ”¯æŒè·¨è®¾å¤‡æ–‡ä»¶ä¼ è¾“ã€æ¶ˆæ¯åŒæ­¥å’Œä¸“ä¸šçº§ç®¡ç†åå°

[ğŸŒŸ åœ¨çº¿æ¼”ç¤º](#) | [ğŸ“– å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) | [ğŸ”§ éƒ¨ç½²æŒ‡å—](#-éƒ¨ç½²æŒ‡å—) | [ğŸ“š æ–‡æ¡£](#-æ–‡æ¡£)

</div>

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½
- ğŸ“± **è·¨è®¾å¤‡åŒæ­¥** - æ”¯æŒå¤šè®¾å¤‡é—´çš„æ¶ˆæ¯å’Œæ–‡ä»¶å®æ—¶åŒæ­¥
- ğŸ“„ **æ–‡ä»¶ä¼ è¾“** - æ”¯æŒå„ç§æ ¼å¼æ–‡ä»¶ä¸Šä¼ ä¸‹è½½ï¼ˆæœ€å¤§1GBï¼‰
- ğŸ’¬ **æ–‡æœ¬æ¶ˆæ¯** - å‘é€å’Œæ¥æ”¶æ–‡æœ¬æ¶ˆæ¯ï¼Œæ”¯æŒè¡¨æƒ…ç¬¦å·
- ğŸ–¼ï¸ **å›¾ç‰‡é¢„è§ˆ** - è‡ªåŠ¨æ˜¾ç¤ºå›¾ç‰‡æ–‡ä»¶é¢„è§ˆå’Œç¼©ç•¥å›¾
- ğŸ“Š **æ¶ˆæ¯å†å²** - å®Œæ•´çš„æ¶ˆæ¯å†å²è®°å½•å’Œæœç´¢åŠŸèƒ½
- ğŸ”„ **å®æ—¶æ›´æ–°** - è‡ªåŠ¨åˆ·æ–°è·å–æœ€æ–°æ¶ˆæ¯ï¼ˆ5ç§’é—´éš”ï¼‰

### ğŸ¨ ç”¨æˆ·ç•Œé¢
- ğŸŒˆ **åŠ¨æ€èƒŒæ™¯** - æµ…è‰²ç³»ç²’å­åŠ¨ç”»èƒŒæ™¯ï¼Œå‘Šåˆ«å•è°ƒç™½è‰²
- ğŸ’« **ç°ä»£åŒ–è®¾è®¡** - ç»ç’ƒæ€æ•ˆæœå’Œæµç•…åŠ¨ç”»
- ğŸ“± **å“åº”å¼å¸ƒå±€** - å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- ğŸ­ **ä¸»é¢˜é€‚é…** - è‡ªåŠ¨é€‚é…ç³»ç»Ÿæš—è‰²/äº®è‰²ä¸»é¢˜
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - æ™ºèƒ½åŠ¨ç”»æ§åˆ¶å’Œèµ„æºç®¡ç†

### ğŸ” ç®¡ç†åå° 3.0 - å…¨æ–°å‡çº§
- ğŸ”’ **å®‰å…¨è®¤è¯** - å¼ºåˆ¶ç¯å¢ƒå˜é‡é…ç½®ï¼Œç§»é™¤é»˜è®¤è´¦æˆ·
- ğŸ¨ **é«˜çº§UIè®¾è®¡** - ç»ç’ƒæ€æ•ˆæœï¼Œç°ä»£åŒ–ç•Œé¢è®¾è®¡
- ğŸ“Š **æ•°æ®ä»ªè¡¨æ¿** - å®æ—¶ç»Ÿè®¡å’Œå¯è§†åŒ–å›¾è¡¨
- ğŸ’¬ **ä¿¡æ¯ç®¡ç†** - æŸ¥çœ‹ã€æœç´¢ã€åˆ é™¤ç”¨æˆ·æ¶ˆæ¯
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - æ‰¹é‡ç®¡ç†æ–‡ä»¶ï¼Œæ”¯æŒä¸‹è½½å’Œåˆ é™¤
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç®¡ç†ç”¨æˆ·è´¦æˆ·ã€è§’è‰²å’Œæƒé™
- ğŸ“ˆ **ç»Ÿè®¡åˆ†æ** - æ´»åŠ¨è¶‹åŠ¿å’Œæ•°æ®åˆ†å¸ƒåˆ†æ
- âš¡ **æµç•…æ“ä½œ** - å»é™¤ç¹çç¡®è®¤å¼¹çª—ï¼Œæ“ä½œæ›´é«˜æ•ˆ
- ğŸŒˆ **åŠ¨æ€èƒŒæ™¯** - æ¸å˜åŠ¨ç”»èƒŒæ™¯ï¼Œè§†è§‰ä½“éªŒå‡çº§
- ğŸ“± **å®Œå…¨å“åº”å¼** - ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å®Œç¾é€‚é…

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯
- **æ ¸å¿ƒæ¡†æ¶**: åŸç”Ÿ HTML5 + CSS3 + ES6+ JavaScript
- **è®¾è®¡ç³»ç»Ÿ**: æ¨¡å—åŒ– CSSï¼Œç»ç’ƒæ€æ•ˆæœï¼Œç°ä»£åŒ–è®¾è®¡è¯­è¨€
- **åŠ¨ç”»å¼•æ“**: CSS3 åŠ¨ç”» + JavaScript æ§åˆ¶
- **å›¾è¡¨åº“**: Chart.js æ•°æ®å¯è§†åŒ–
- **å“åº”å¼**: ç§»åŠ¨ä¼˜å…ˆçš„å“åº”å¼è®¾è®¡

### åç«¯æŠ€æœ¯
- **è¿è¡Œæ—¶**: Cloudflare Workers / Pages Functions
- **æ¡†æ¶**: Hono (è½»é‡çº§ Web æ¡†æ¶)
- **æ•°æ®åº“**: Cloudflare D1 (SQLite)
- **æ–‡ä»¶å­˜å‚¨**: Cloudflare R2 (S3å…¼å®¹)
- **è®¤è¯**: ä¼šè¯ID + SHA-256 å¯†ç åŠ å¯†

### éƒ¨ç½²å¹³å°
- **Workers æ¨¡å¼**: å…¨çƒè¾¹ç¼˜è®¡ç®—éƒ¨ç½²
- **Pages æ¨¡å¼**: é™æ€ç«™ç‚¹ + æ— æœåŠ¡å™¨å‡½æ•°
- **CDN**: Cloudflare å…¨çƒ CDN åŠ é€Ÿ
- **åŸŸå**: æ”¯æŒè‡ªå®šä¹‰åŸŸåç»‘å®š

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
ğŸ“ wxchat/
â”œâ”€â”€ ğŸ“„ README.md                    # ğŸ“– é¡¹ç›®è¯´æ˜æ–‡æ¡£
â”œâ”€â”€ ğŸ“„ package.json                 # ğŸ“¦ é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ ğŸ“„ wrangler.toml                # âš™ï¸ Workers é…ç½®
â”œâ”€â”€ ğŸ“„ wrangler-pages.toml          # âš™ï¸ Pages é…ç½®
â”œâ”€â”€ ğŸ“„ setup-database.js            # ğŸ”§ ä¸€é”®æ•°æ®åº“è®¾ç½®è„šæœ¬
â”œâ”€â”€ ğŸ“„ ADMIN_SETUP_GUIDE_V2.md      # ğŸ” æ–°ç‰ˆç®¡ç†åå°è®¾ç½®æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ“ database/                    # ğŸ—„ï¸ æ•°æ®åº“ç›¸å…³
â”‚   â”œâ”€â”€ ğŸ“„ schema.sql               # ğŸ—ï¸ åŸºç¡€æ•°æ®åº“ç»“æ„
â”‚   â””â”€â”€ ğŸ“„ admin-schema.sql         # ğŸ” ç®¡ç†åå°æ•°æ®åº“ç»“æ„
â”‚
â”œâ”€â”€ ğŸ“ public/                      # ğŸ¨ å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ ğŸ“„ index.html               # ğŸ  ä¸»åº”ç”¨é¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ admin.html               # ğŸ” ç®¡ç†åå°é¡µé¢
â”‚   â”œâ”€â”€ ğŸ“„ admin-test.html          # ğŸ§ª ç®¡ç†åå°æµ‹è¯•é¡µé¢
â”‚   â”‚
â”‚   â”œâ”€â”€ ğŸ“ css/                     # ğŸ¨ æ ·å¼æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ reset.css            # ğŸ”„ CSS é‡ç½®
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ main.css             # ğŸ¯ ä¸»åº”ç”¨æ ·å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ admin.css            # ğŸ” ç®¡ç†åå°åŸºç¡€æ ·å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ admin-premium.css    # âœ¨ é«˜çº§ç®¡ç†åå°æ ·å¼ï¼ˆæ–°ï¼‰
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ admin-enhanced.css   # âœ¨ ç®¡ç†åå°å¢å¼ºæ ·å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ animated-background.css # ğŸŒˆ åŠ¨æ€èƒŒæ™¯æ ·å¼
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ components.css       # ğŸ§© ç»„ä»¶æ ·å¼åº“
â”‚   â”‚   â””â”€â”€ ğŸ“„ responsive.css       # ğŸ“± å“åº”å¼æ ·å¼
â”‚   â”‚
â”‚   â””â”€â”€ ğŸ“ js/                      # âš¡ JavaScript æ¨¡å—
â”‚       â”œâ”€â”€ ğŸ“„ app.js               # ğŸš€ ä¸»åº”ç”¨å…¥å£
â”‚       â”œâ”€â”€ ğŸ“„ background-animation.js # ğŸŒˆ èƒŒæ™¯åŠ¨ç”»æ§åˆ¶
â”‚       â”œâ”€â”€ ğŸ“„ enhanced-background.js # ğŸŒˆ å¢å¼ºèƒŒæ™¯åŠ¨ç”»
â”‚       â”œâ”€â”€ ğŸ“„ config.js            # âš™ï¸ åº”ç”¨é…ç½®
â”‚       â”œâ”€â”€ ğŸ“„ utils.js             # ğŸ› ï¸ å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ ğŸ“„ api.js               # ğŸŒ API æ¥å£å°è£…
â”‚       â”œâ”€â”€ ğŸ“„ ui.js                # ğŸ¨ UI æ“ä½œç®¡ç†
â”‚       â”œâ”€â”€ ğŸ“„ fileUpload.js        # ğŸ“ æ–‡ä»¶ä¸Šä¼ å¤„ç†
â”‚       â”œâ”€â”€ ğŸ“„ messageHandler.js    # ğŸ’¬ æ¶ˆæ¯å¤„ç†é€»è¾‘
â”‚       â”‚
â”‚       â””â”€â”€ ğŸ“ admin/               # ğŸ” ç®¡ç†åå°è„šæœ¬
â”‚           â”œâ”€â”€ ğŸ“„ app.js           # ğŸš€ ç®¡ç†åå°å…¥å£
â”‚           â”œâ”€â”€ ğŸ“„ auth.js          # ğŸ” è®¤è¯ç®¡ç†
â”‚           â”œâ”€â”€ ğŸ“„ api.js           # ğŸŒ åå° API å°è£…
â”‚           â”œâ”€â”€ ğŸ“„ dashboard.js     # ğŸ“Š ä»ªè¡¨æ¿é€»è¾‘
â”‚           â”œâ”€â”€ ğŸ“„ messages.js      # ğŸ’¬ æ¶ˆæ¯ç®¡ç†
â”‚           â”œâ”€â”€ ğŸ“„ files.js         # ğŸ“ æ–‡ä»¶ç®¡ç†
â”‚           â””â”€â”€ ğŸ“„ users.js         # ğŸ‘¥ ç”¨æˆ·ç®¡ç†
â”‚
â”œâ”€â”€ ğŸ“ functions/                   # âš¡ Pages Functions API
â”‚   â””â”€â”€ ğŸ“ api/                     # ğŸŒ API è·¯ç”±
â”‚       â”œâ”€â”€ ğŸ“„ messages.js          # ğŸ’¬ æ¶ˆæ¯ API
â”‚       â”œâ”€â”€ ğŸ“„ sync.js              # ğŸ”„ åŒæ­¥ API
â”‚       â”œâ”€â”€ ğŸ“„ clear-all.js         # ğŸ§¹ æ¸…ç† API
â”‚       â”œâ”€â”€ ğŸ“ auth/                # ğŸ” è®¤è¯ API
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ login.js         # ğŸ”‘ ç™»å½•
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ register.js      # ğŸ“ æ³¨å†Œ
â”‚       â”‚   â””â”€â”€ ğŸ“„ init-admin.js    # ğŸ”§ ç®¡ç†å‘˜åˆå§‹åŒ–ï¼ˆå·²æ›´æ–°ï¼‰
â”‚       â”œâ”€â”€ ğŸ“ admin/               # ğŸ” ç®¡ç†åå° API
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ dashboard.js     # ğŸ“Š ä»ªè¡¨æ¿æ•°æ®
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ messages.js      # ğŸ’¬ æ¶ˆæ¯ç®¡ç†
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ files.js         # ğŸ“ æ–‡ä»¶ç®¡ç†
â”‚       â”‚   â””â”€â”€ ğŸ“„ users.js         # ğŸ‘¥ ç”¨æˆ·ç®¡ç†
â”‚       â””â”€â”€ ğŸ“ files/               # ğŸ“ æ–‡ä»¶ API
â”‚           â”œâ”€â”€ ğŸ“„ upload.js        # â¬†ï¸ æ–‡ä»¶ä¸Šä¼ 
â”‚           â””â”€â”€ ğŸ“ download/
â”‚               â””â”€â”€ ğŸ“„ [r2Key].js   # â¬‡ï¸ æ–‡ä»¶ä¸‹è½½
â”‚
â”œâ”€â”€ ğŸ“ worker/                      # âš¡ Workers æ¨¡å¼ä»£ç 
â”‚   â””â”€â”€ ğŸ“„ index.js                 # ğŸ”§ Workers å…¥å£
â”‚
â””â”€â”€ ğŸ“ docs/                        # ğŸ“š æ–‡æ¡£
    â”œâ”€â”€ ğŸ“„ DATABASE_SETUP.md        # ğŸ—„ï¸ æ•°æ®åº“è®¾ç½®æŒ‡å—
    â”œâ”€â”€ ğŸ“„ MANUAL_D1_SETUP.md       # ğŸ”§ æ‰‹åŠ¨æ•°æ®åº“åˆ›å»ºæŒ‡å—
    â”œâ”€â”€ ğŸ“„ ADMIN_SETUP_GUIDE.md     # ğŸ” æ—§ç‰ˆç®¡ç†åå°è®¾ç½®æŒ‡å—
    â”œâ”€â”€ ğŸ“„ ADMIN_SETUP_GUIDE_V2.md  # ğŸ” æ–°ç‰ˆç®¡ç†åå°è®¾ç½®æŒ‡å—
    â””â”€â”€ ğŸ“„ MIGRATION_GUIDE.md       # ğŸ”„ è¿ç§»æŒ‡å—
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ å‰ç½®è¦æ±‚

- âœ… **Cloudflare è´¦æˆ·** - [å…è´¹æ³¨å†Œ](https://dash.cloudflare.com/sign-up)
- âœ… **Node.js 18+** - [ä¸‹è½½å®‰è£…](https://nodejs.org/)
- âœ… **Git** - [ä¸‹è½½å®‰è£…](https://git-scm.com/)

### âš¡ ä¸€é”®éƒ¨ç½²

#### ğŸŒŸ æ–¹å¼ä¸€ï¼šCloudflare Pagesï¼ˆæ¨èï¼‰

```bash
# 1ï¸âƒ£ å…‹éš†é¡¹ç›®
git clone https://github.com/flalad/wxchat.git
cd wxchat

# 2ï¸âƒ£ å®‰è£…ä¾èµ–
npm install

# 3ï¸âƒ£ ç™»å½• Cloudflare
npx wrangler login

# 4ï¸âƒ£ ä¸€é”®è®¾ç½®æ•°æ®åº“å’Œå­˜å‚¨
npm run setup

# 5ï¸âƒ£ åˆ›å»º Pages é¡¹ç›®
npm run pages:create

# 6ï¸âƒ£ éƒ¨ç½²åˆ° Pages
npm run pages:deploy

# 7ï¸âƒ£ è¶…ç®€å•ç®¡ç†å‘˜è®¾ç½®ï¼ˆå¿…éœ€ï¼‰
# åœ¨ Cloudflare Dashboard ä¸­è®¾ç½®ç¯å¢ƒå˜é‡ï¼š
# ADMIN_USERNAME=your_admin_username
# ADMIN_PASSWORD=your_secure_password
# ç„¶åé‡æ–°éƒ¨ç½²ï¼Œç›´æ¥ç”¨è¿™äº›å‡­æ®ç™»å½•å³å¯ï¼
```

#### âš¡ æ–¹å¼äºŒï¼šCloudflare Workers

```bash
# å‰é¢æ­¥éª¤ 1-4 ç›¸åŒ

# 5ï¸âƒ£ é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¿…éœ€ï¼‰
# ç¼–è¾‘ wrangler.toml ä¸­çš„ ADMIN_USERNAME å’Œ ADMIN_PASSWORD

# 6ï¸âƒ£ éƒ¨ç½²åˆ° Workers
npm run deploy
```

### ğŸ¯ è¶…ç®€å•ç®¡ç†å‘˜è®¾ç½®

**ğŸš€ ä¸‰æ­¥æå®šç®¡ç†å‘˜è®¾ç½®ï¼š**

1. **è®¾ç½®ç¯å¢ƒå˜é‡**: åœ¨ Cloudflare Pages é¡¹ç›®ä¸­è®¾ç½® `ADMIN_USERNAME` å’Œ `ADMIN_PASSWORD`
2. **é‡æ–°éƒ¨ç½²**: ç‚¹å‡»é‡æ–°éƒ¨ç½²æŒ‰é’®è®©ç¯å¢ƒå˜é‡ç”Ÿæ•ˆ
3. **ç›´æ¥ç™»å½•**: è®¿é—® `/admin.html`ï¼Œç”¨è®¾ç½®çš„å‡­æ®ç›´æ¥ç™»å½•å³å¯ï¼

> ğŸ’¡ **å°±æ˜¯è¿™ä¹ˆç®€å•ï¼** ç³»ç»Ÿä¼šåœ¨é¦–æ¬¡ç™»å½•æ—¶è‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼Œæ— éœ€å¤æ‚çš„åˆå§‹åŒ–æ­¥éª¤ã€‚

**ğŸ“– è¯¦ç»†æŒ‡å—**: æŸ¥çœ‹ [`SIMPLE_ADMIN_SETUP.md`](SIMPLE_ADMIN_SETUP.md) è·å–å®Œæ•´çš„ä¸‰æ­¥è®¾ç½®æŒ‡å—ã€‚

### ğŸ¯ å…¶ä»–é…ç½®

1. **è®¿é—®åº”ç”¨**: ä½¿ç”¨ Cloudflare æä¾›çš„åŸŸåè®¿é—®
2. **å®‰å…¨é…ç½®**:
   - ä½¿ç”¨å¼ºå¯†ç ï¼ˆå»ºè®®12ä½ä»¥ä¸Šï¼ŒåŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦ï¼‰
   - å®šæœŸæ›´æ¢ç®¡ç†å‘˜å¯†ç 
3. **è‡ªå®šä¹‰åŸŸå**: åœ¨ Cloudflare Dashboard ä¸­ç»‘å®šè‡ªå®šä¹‰åŸŸå

## ğŸ”§ éƒ¨ç½²æŒ‡å—

### ğŸ—„ï¸ æ•°æ®åº“è®¾ç½®

#### è‡ªåŠ¨åŒ–è®¾ç½®ï¼ˆæ¨èï¼‰
```bash
npm run setup
```

#### æ‰‹åŠ¨è®¾ç½®
```bash
# åˆ›å»º D1 æ•°æ®åº“
npx wrangler d1 create wxchat

# åˆ›å»º R2 å­˜å‚¨æ¡¶
npx wrangler r2 bucket create wxchat

# åˆå§‹åŒ–æ•°æ®åº“è¡¨
npm run db:init-all
```

è¯¦ç»†è®¾ç½®æŒ‡å—ï¼š
- ğŸ“– [æ•°æ®åº“è®¾ç½®å®Œæ•´æŒ‡å—](DATABASE_SETUP.md)
- ğŸ”§ [æ‰‹åŠ¨ D1 æ•°æ®åº“åˆ›å»ºæŒ‡å—](MANUAL_D1_SETUP.md)
- ğŸ” [æ–°ç‰ˆç®¡ç†åå°è®¾ç½®æŒ‡å—](ADMIN_SETUP_GUIDE_V2.md)

### âš™ï¸ é…ç½®æ–‡ä»¶

#### Workers é…ç½® (`wrangler.toml`)
```toml
name = "wxchat"
main = "worker/index.js"
compatibility_date = "2025-06-17"

# ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¿…éœ€ï¼‰
[vars]
ADMIN_USERNAME = "your_admin_username"    # ç®¡ç†å‘˜ç”¨æˆ·å
ADMIN_PASSWORD = "your_secure_password"   # ç®¡ç†å‘˜å¯†ç 

[[d1_databases]]
binding = "DB"
database_name = "wxchat"
database_id = "your-database-id"

[[r2_buckets]]
binding = "R2"
bucket_name = "wxchat"
```

#### Pages é…ç½® (`wrangler-pages.toml`)
```toml
name = "wxchat-pages"
compatibility_date = "2025-06-17"
pages_build_output_dir = "./public"

# ç¯å¢ƒå˜é‡é…ç½®ï¼ˆå¿…éœ€ï¼‰
[vars]
ENVIRONMENT = "production"
ADMIN_USERNAME = "your_admin_username"    # ç®¡ç†å‘˜ç”¨æˆ·å
ADMIN_PASSWORD = "your_secure_password"   # ç®¡ç†å‘˜å¯†ç 

[[d1_databases]]
binding = "DB"
database_name = "wxchat"
database_id = "your-database-id"

[[r2_buckets]]
binding = "R2"
bucket_name = "wxchat"
```

### ğŸ” ç¯å¢ƒå˜é‡è¯´æ˜

| å˜é‡å | è¯´æ˜ | æ˜¯å¦å¿…éœ€ | å®‰å…¨å»ºè®® |
|--------|------|----------|----------|
| `ADMIN_USERNAME` | ç®¡ç†å‘˜ç”¨æˆ·å | âœ… å¿…éœ€ | é¿å…ä½¿ç”¨å¸¸è§ç”¨æˆ·å |
| `ADMIN_PASSWORD` | ç®¡ç†å‘˜å¯†ç  | âœ… å¿…éœ€ | 12ä½ä»¥ä¸Šå¼ºå¯†ç  |
| `ENVIRONMENT` | è¿è¡Œç¯å¢ƒæ ‡è¯† | âŒ å¯é€‰ | ç”¨äºåŒºåˆ†ç¯å¢ƒ |

> ğŸ”’ **å®‰å…¨è¦æ±‚**:
> - å¿…é¡»è®¾ç½® `ADMIN_USERNAME` å’Œ `ADMIN_PASSWORD` ç¯å¢ƒå˜é‡
> - å¯†ç å»ºè®®åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šå­—ç¬¦
> - å®šæœŸæ›´æ¢ç®¡ç†å‘˜å¯†ç 
> - ä¸è¦åœ¨ä»£ç ä¸­ç¡¬ç¼–ç å‡­æ®

## ğŸ“± ä½¿ç”¨æŒ‡å—

### ğŸ® åŸºç¡€åŠŸèƒ½

| åŠŸèƒ½ | æ“ä½œæ–¹å¼ | è¯´æ˜ |
|------|---------|------|
| ğŸ’¬ **å‘é€æ¶ˆæ¯** | è¾“å…¥æ¡†è¾“å…¥ â†’ ç‚¹å‡»å‘é€ | æ”¯æŒæ–‡æœ¬å’Œè¡¨æƒ…ç¬¦å· |
| ğŸ“ **ä¸Šä¼ æ–‡ä»¶** | ç‚¹å‡»ğŸ“æŒ‰é’® æˆ– æ‹–æ‹½æ–‡ä»¶ | æœ€å¤§1GBï¼Œæ”¯æŒæ‰€æœ‰æ ¼å¼ |
| â¬‡ï¸ **ä¸‹è½½æ–‡ä»¶** | ç‚¹å‡»æ–‡ä»¶æ¶ˆæ¯ä¸­çš„ä¸‹è½½æŒ‰é’® | ä¿æŒåŸå§‹æ–‡ä»¶å |
| ğŸ”„ **è·¨è®¾å¤‡åŒæ­¥** | ä¸åŒè®¾å¤‡è®¿é—®ç›¸åŒURL | è‡ªåŠ¨åŒæ­¥æ‰€æœ‰æ¶ˆæ¯å’Œæ–‡ä»¶ |

### ğŸ” ç®¡ç†åå°åŠŸèƒ½

#### ç™»å½•ç®¡ç†åå°
1. è®¿é—® `/admin.html`
2. ä½¿ç”¨ç¯å¢ƒå˜é‡ä¸­é…ç½®çš„ç®¡ç†å‘˜å‡­æ®ç™»å½•
3. ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºç®¡ç†å‘˜è´¦æˆ·ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰

> ğŸ’¡ **è¶…ç®€å•**: åªéœ€è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œé‡æ–°éƒ¨ç½²ï¼Œç„¶åç›´æ¥ç™»å½•ï¼æ— éœ€å¤æ‚çš„åˆå§‹åŒ–æ­¥éª¤ã€‚

#### ä¸»è¦åŠŸèƒ½
- ğŸ“Š **ä»ªè¡¨æ¿** - æŸ¥çœ‹ç³»ç»Ÿç»Ÿè®¡å’Œå›¾è¡¨ï¼Œå…¨æ–°ç»ç’ƒæ€è®¾è®¡
- ğŸ’¬ **ä¿¡æ¯ç®¡ç†** - ç®¡ç†æ‰€æœ‰ç”¨æˆ·æ¶ˆæ¯ï¼Œæ”¯æŒé«˜çº§æœç´¢
- ğŸ“ **æ–‡ä»¶ç®¡ç†** - æ‰¹é‡ç®¡ç†ä¸Šä¼ çš„æ–‡ä»¶ï¼Œæ”¯æŒé¢„è§ˆ
- ğŸ‘¥ **ç”¨æˆ·ç®¡ç†** - ç®¡ç†ç”¨æˆ·è´¦æˆ·å’Œæƒé™ï¼Œå®æ—¶çŠ¶æ€æ›´æ–°

#### ğŸ¨ ç•Œé¢å‡çº§äº®ç‚¹
- âœ¨ **ç»ç’ƒæ€è®¾è®¡** - ç°ä»£åŒ–åŠé€æ˜æ•ˆæœ
- ğŸŒˆ **åŠ¨æ€æ¸å˜èƒŒæ™¯** - è‡ªåŠ¨å˜åŒ–çš„æ¸å˜åŠ¨ç”»
- ğŸ’« **æµç•…åŠ¨ç”»** - 60fps å¹³æ»‘è¿‡æ¸¡æ•ˆæœ
- ğŸ“± **å®Œå…¨å“åº”å¼** - ç§»åŠ¨ç«¯å’Œæ¡Œé¢ç«¯å®Œç¾é€‚é…
- ğŸ¯ **æ™ºèƒ½äº¤äº’** - æ‚¬æµ®æ•ˆæœå’Œæ™ºèƒ½åé¦ˆ

#### ğŸš€ ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- âš¡ **ä¸€é”®æ“ä½œ** - åˆ é™¤ã€ä¿®æ”¹ç­‰æ“ä½œæ— éœ€ç¡®è®¤å¼¹çª—
- ğŸ¯ **æ™ºèƒ½åé¦ˆ** - æ“ä½œå®Œæˆåæ˜¾ç¤ºæ¸…æ™°çš„æˆåŠŸ/å¤±è´¥æç¤º
- ğŸ”„ **è‡ªåŠ¨åˆ·æ–°** - æ“ä½œåè‡ªåŠ¨æ›´æ–°æ•°æ®ï¼Œä¿æŒç•Œé¢åŒæ­¥
- ğŸ’¨ **æµç•…äº¤äº’** - å»é™¤ç¹ççš„ç¡®è®¤æ­¥éª¤ï¼Œæå‡æ“ä½œæ•ˆç‡

### ğŸ§¹ æ•°æ®æ¸…ç†åŠŸèƒ½

å‘é€ä»¥ä¸‹æŒ‡ä»¤å¯ä»¥æ¸…ç†æ‰€æœ‰æ•°æ®ï¼š
```
/clear-all
æ¸…ç©ºæ•°æ®
/æ¸…ç©º
clear all
```

## ğŸ¨ ç•Œé¢ç‰¹æ€§

### ğŸŒˆ åŠ¨æ€èƒŒæ™¯
- **æµ®åŠ¨ç²’å­** - å¤šå½©ç²’å­ä¸Šå‡åŠ¨ç”»
- **å‡ ä½•å›¾å½¢** - æ—‹è½¬çš„å‡ ä½•å…ƒç´ 
- **å…‰ç‚¹æ•ˆæœ** - é—ªçƒçš„æ˜Ÿå…‰æ•ˆæœ
- **æ³¢æµªåŠ¨ç”»** - åº•éƒ¨æµåŠ¨æ³¢æµª
- **é¼ æ ‡äº¤äº’** - è·Ÿéšé¼ æ ‡çš„æ¸å˜å˜åŒ–

### ğŸ’« ç°ä»£åŒ–è®¾è®¡
- **ç»ç’ƒæ€æ•ˆæœ** - åŠé€æ˜æ¨¡ç³ŠèƒŒæ™¯
- **æµç•…åŠ¨ç”»** - 60fps å¹³æ»‘è¿‡æ¸¡
- **å“åº”å¼å¸ƒå±€** - å®Œç¾é€‚é…å„ç§è®¾å¤‡
- **ä¸»é¢˜é€‚é…** - è‡ªåŠ¨é€‚é…ç³»ç»Ÿä¸»é¢˜

### ğŸ¨ ç®¡ç†åå° 3.0 è®¾è®¡è¯­è¨€
- **é«˜çº§ç»ç’ƒæ€** - å¤šå±‚æ¬¡é€æ˜æ•ˆæœ
- **æ¸å˜åŠ¨ç”»èƒŒæ™¯** - è‡ªåŠ¨å˜åŒ–çš„è‰²å½©
- **ç°ä»£åŒ–ç»„ä»¶** - ç»Ÿä¸€çš„è®¾è®¡ç³»ç»Ÿ
- **æ™ºèƒ½å¸ƒå±€** - è‡ªé€‚åº”çš„ç•Œé¢ç»“æ„

## ğŸ”§ å¼€å‘æŒ‡å—

### ğŸ› ï¸ æœ¬åœ°å¼€å‘

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/flalad/wxchat.git
cd wxchat

# å®‰è£…ä¾èµ–
npm install

# é…ç½®æœ¬åœ°ç¯å¢ƒå˜é‡
# åˆ›å»º .dev.vars æ–‡ä»¶ï¼š
echo "ADMIN_USERNAME=local_admin" > .dev.vars
echo "ADMIN_PASSWORD=LocalDev@2024!" >> .dev.vars

# æœ¬åœ°å¼€å‘ (Pages æ¨¡å¼)
npm run pages:dev

# æœ¬åœ°å¼€å‘ (Workers æ¨¡å¼)
npm run dev
```

### ğŸ“¦ å¯ç”¨è„šæœ¬

```bash
# æ•°æ®åº“ç®¡ç†
npm run setup           # ä¸€é”®æ•°æ®åº“è®¾ç½®
npm run db:init         # åˆå§‹åŒ–åŸºç¡€è¡¨
npm run db:init-admin   # åˆå§‹åŒ–ç®¡ç†åå°è¡¨
npm run db:init-all     # åˆå§‹åŒ–æ‰€æœ‰è¡¨
npm run db:reset        # é‡ç½®æ•°æ®åº“

# æ„å»ºå’Œéƒ¨ç½²
npm run build           # æ„å»º Workers ç‰ˆæœ¬
npm run build:pages     # æ„å»º Pages ç‰ˆæœ¬
npm run deploy          # éƒ¨ç½²åˆ° Workers
npm run pages:deploy    # éƒ¨ç½²åˆ° Pages
npm run pages:create    # åˆ›å»º Pages é¡¹ç›®

# å¼€å‘è°ƒè¯•
npm run dev             # Workers æœ¬åœ°å¼€å‘
npm run pages:dev       # Pages æœ¬åœ°å¼€å‘
```

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### åŸºç¡€è¡¨
- **messages** - æ¶ˆæ¯è¡¨ï¼ˆæ–‡æœ¬å’Œæ–‡ä»¶æ¶ˆæ¯ï¼‰
- **files** - æ–‡ä»¶è¡¨ï¼ˆæ–‡ä»¶å…ƒæ•°æ®å’Œå­˜å‚¨ä¿¡æ¯ï¼‰
- **devices** - è®¾å¤‡è¡¨ï¼ˆè®¾å¤‡æ ‡è¯†å’Œæ´»åŠ¨çŠ¶æ€ï¼‰

### ç®¡ç†åå°è¡¨
- **users** - ç”¨æˆ·è¡¨ï¼ˆç®¡ç†å‘˜å’Œç”¨æˆ·è´¦æˆ·ï¼‰
- **sessions** - ä¼šè¯è¡¨ï¼ˆç™»å½•çŠ¶æ€ç®¡ç†ï¼‰
- **daily_stats** - ç»Ÿè®¡è¡¨ï¼ˆæ¯æ—¥æ•°æ®ç»Ÿè®¡ï¼‰
- **admin_logs** - æ“ä½œæ—¥å¿—è¡¨ï¼ˆç®¡ç†æ“ä½œè®°å½•ï¼‰

## ğŸ” å®‰å…¨ç‰¹æ€§

- ğŸ”’ **å¼ºåˆ¶ç¯å¢ƒå˜é‡** - ç§»é™¤é»˜è®¤è´¦æˆ·ï¼Œå¼ºåˆ¶é…ç½®
- ğŸ« **ä¼šè¯è®¤è¯** - å®‰å…¨çš„ä¼šè¯IDç®¡ç†
- ğŸ›¡ï¸ **CORS ä¿æŠ¤** - è·¨åŸŸè¯·æ±‚ä¿æŠ¤
- ğŸ” **è¾“å…¥éªŒè¯** - ä¸¥æ ¼çš„æ•°æ®éªŒè¯
- ğŸ“ **æ“ä½œæ—¥å¿—** - å®Œæ•´çš„å®¡è®¡æ—¥å¿—
- âš™ï¸ **ç¯å¢ƒå˜é‡é…ç½®** - æ•æ„Ÿä¿¡æ¯é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
- ğŸ” **å¯†ç åŠ å¯†** - SHA-256 å“ˆå¸ŒåŠ å¯†

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

- âš¡ **è¾¹ç¼˜è®¡ç®—** - Cloudflare å…¨çƒè¾¹ç¼˜èŠ‚ç‚¹
- ğŸ—œï¸ **èµ„æºå‹ç¼©** - CSS/JS è‡ªåŠ¨å‹ç¼©
- ğŸ¯ **æ‡’åŠ è½½** - æŒ‰éœ€åŠ è½½èµ„æº
- ğŸ’¾ **æ™ºèƒ½ç¼“å­˜** - å¤šå±‚ç¼“å­˜ç­–ç•¥
- ğŸ“± **ç§»åŠ¨ä¼˜åŒ–** - ç§»åŠ¨ç«¯æ€§èƒ½ä¼˜åŒ–
- ğŸ¨ **CSS ä¼˜åŒ–** - æ¨¡å—åŒ–æ ·å¼ç³»ç»Ÿ

## ğŸŒ æµè§ˆå™¨æ”¯æŒ

| æµè§ˆå™¨ | ç‰ˆæœ¬ | æ”¯æŒçŠ¶æ€ |
|--------|------|----------|
| Chrome | 80+ | âœ… å®Œå…¨æ”¯æŒ |
| Firefox | 75+ | âœ… å®Œå…¨æ”¯æŒ |
| Safari | 13+ | âœ… å®Œå…¨æ”¯æŒ |
| Edge | 80+ | âœ… å®Œå…¨æ”¯æŒ |
| ç§»åŠ¨æµè§ˆå™¨ | ç°ä»£ç‰ˆæœ¬ | âœ… å®Œå…¨æ”¯æŒ |

## ğŸ†• ç‰ˆæœ¬æ›´æ–°

### v2.2.0 - ç®¡ç†åå° 3.0 é‡å¤§å‡çº§ ğŸ‰

#### ğŸ”’ å®‰å…¨æ”¹è¿›
- âœ… ç§»é™¤é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·
- âœ… å¼ºåˆ¶ä½¿ç”¨ç¯å¢ƒå˜é‡é…ç½®ç®¡ç†å‘˜å‡­æ®
- âœ… å¢å¼ºå¯†ç å®‰å…¨è¦æ±‚
- âœ… æ”¹è¿›è®¤è¯æµç¨‹

#### ğŸ¨ UI/UX å…¨é¢å‡çº§
- âœ… å…¨æ–°ç»ç’ƒæ€è®¾è®¡è¯­è¨€
- âœ… åŠ¨æ€æ¸å˜èƒŒæ™¯åŠ¨ç”»
- âœ… ç°ä»£åŒ–ç»„ä»¶ç³»ç»Ÿ
- âœ… æµç•…çš„äº¤äº’åŠ¨ç”»
- âœ… å®Œå…¨å“åº”å¼è®¾è®¡

#### ğŸ› é—®é¢˜ä¿®å¤
- âœ… ä¿®å¤ä¾§è¾¹æ å¸ƒå±€é—®é¢˜
- âœ… ä¼˜åŒ–ç§»åŠ¨ç«¯é€‚é…
- âœ… æ”¹è¿›æ€§èƒ½è¡¨ç°
- âœ… ä¿®å¤å„ç§UIç»†èŠ‚

#### ğŸ“š æ–‡æ¡£æ›´æ–°
- âœ… æ–°å¢ v2.2.0 è®¾ç½®æŒ‡å—
- âœ… æ›´æ–°éƒ¨ç½²æ–‡æ¡£
- âœ… å®Œå–„å®‰å…¨é…ç½®è¯´æ˜

### v2.1.0
- æ–°å¢ç°ä»£åŒ–UIè®¾è®¡
- æ”¹è¿›å“åº”å¼å¸ƒå±€
- å¢å¼ºæ•°æ®å¯è§†åŒ–
- ä¼˜åŒ–æ€§èƒ½è¡¨ç°

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ğŸ”§ å¼€å‘ç¯å¢ƒè®¾ç½®

```bash
# Fork é¡¹ç›®å¹¶å…‹éš†
git clone https://github.com/your-username/wxchat.git
cd wxchat

# å®‰è£…ä¾èµ–
npm install

# é…ç½®æœ¬åœ°ç¯å¢ƒå˜é‡
echo "ADMIN_USERNAME=dev_admin" > .dev.vars
echo "ADMIN_PASSWORD=DevPassword@2024!" >> .dev.vars

# åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
git checkout -b feature/your-feature-name

# å¼€å‘å’Œæµ‹è¯•
npm run pages:dev

# æäº¤æ›´æ”¹
git commit -m "feat: add your feature"
git push origin feature/your-feature-name
```

### ğŸ“ æäº¤è§„èŒƒ

```
feat: æ–°åŠŸèƒ½
fix: ä¿®å¤bug
docs: æ–‡æ¡£æ›´æ–°
style: ä»£ç æ ¼å¼
refactor: é‡æ„
test: æµ‹è¯•ç›¸å…³
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
security: å®‰å…¨ç›¸å…³æ›´æ–°
ui: UI/UX æ”¹è¿›
```

## ğŸ“š æ–‡æ¡£

- ğŸš€ [**è¶…ç®€å•ç®¡ç†å‘˜è®¾ç½®æŒ‡å—**](SIMPLE_ADMIN_SETUP.md) - **æ¨èé˜…è¯»**
- ğŸ“– [æ•°æ®åº“è®¾ç½®æŒ‡å—](DATABASE_SETUP.md)
- ğŸ”§ [æ‰‹åŠ¨ D1 æ•°æ®åº“åˆ›å»º](MANUAL_D1_SETUP.md)
- ğŸ” [ç®¡ç†åå°è®¾ç½®æŒ‡å— v2.2.0](ADMIN_SETUP_GUIDE_V2.md)
- ğŸ” [æ—§ç‰ˆç®¡ç†åå°è®¾ç½®æŒ‡å—](ADMIN_SETUP_GUIDE.md)
- ğŸ”„ [ç‰ˆæœ¬è¿ç§»æŒ‡å—](MIGRATION_GUIDE.md)

## ğŸ› é—®é¢˜åé¦ˆ

é‡åˆ°é—®é¢˜ï¼Ÿè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼åé¦ˆï¼š

- ğŸ› [æäº¤ Issue](https://github.com/flalad/wxchat/issues)
- ğŸ’¬ [è®¨è®ºåŒº](https://github.com/flalad/wxchat/discussions)
- ğŸ“§ [é‚®ä»¶è”ç³»](mailto:support@example.com)

## ğŸ“„ è®¸å¯è¯

<div align="center">

**CC BY-NC-SA 4.0 License**

[![License: CC BY-NC-SA 4.0](https://img.shields.io/badge/License-CC%20BY--NC--SA%204.0-lightgrey.svg)](https://creativecommons.org/licenses/by-nc-sa/4.0/)

Copyright (c) 2025 å¾®ä¿¡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹

æœ¬é¡¹ç›®é‡‡ç”¨ [Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License](https://creativecommons.org/licenses/by-nc-sa/4.0/) è®¸å¯è¯ã€‚

### ğŸš« **ä¸¥æ ¼ç¦æ­¢å•†ä¸šç”¨é€”**

- âœ… **å…è®¸**: ä¸ªäººå­¦ä¹ ã€ç ”ç©¶ã€éè¥åˆ©ä½¿ç”¨
- âœ… **å…è®¸**: ä¿®æ”¹å’Œåˆ†å‘ï¼ˆéœ€ä¿æŒç›¸åŒè®¸å¯è¯ï¼‰
- âœ… **å…è®¸**: ç½²åä½¿ç”¨
- âŒ **ç¦æ­¢**: ä»»ä½•å½¢å¼çš„å•†ä¸šç”¨é€”
- âŒ **ç¦æ­¢**: å•†ä¸šé”€å”®æˆ–ç›ˆåˆ©

</div>

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹æŠ€æœ¯å’ŒæœåŠ¡ï¼š

- [Cloudflare Workers](https://workers.cloudflare.com/) - è¾¹ç¼˜è®¡ç®—å¹³å°
- [Cloudflare Pages](https://pages.cloudflare.com/) - é™æ€ç«™ç‚¹æ‰˜ç®¡
- [Cloudflare D1](https://developers.cloudflare.com/d1/) - è¾¹ç¼˜æ•°æ®åº“
- [Cloudflare R2](https://developers.cloudflare.com/r2/) - å¯¹è±¡å­˜å‚¨
- [Hono](https://hono.dev/) - è½»é‡çº§ Web æ¡†æ¶
- [Chart.js](https://www.chartjs.org/) - å›¾è¡¨åº“

---

<div align="center">

**ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸ª Star â­**

*Made with â¤ï¸ by flalad*

[å›åˆ°é¡¶éƒ¨ â¬†ï¸](#-å¾®ä¿¡æ–‡ä»¶ä¼ è¾“åŠ©æ‰‹-web-åº”ç”¨)

</div>

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=flalad/wxchat-up-pg&type=Date)](https://www.star-history.com/#flalad/wxchat-up-pg&Date)
